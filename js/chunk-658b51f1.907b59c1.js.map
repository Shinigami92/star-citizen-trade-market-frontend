{"version":3,"sources":["webpack:///./node_modules/vuetify/lib/components/VDataTable/VEditDialog.js","webpack:///./src/views/administration/game-version/index.pug","webpack:///./src/views/administration/game-version/index.ts","webpack:///./src/views/administration/game-version/index.ts?6f5b","webpack:///./src/views/administration/game-version/index.vue"],"names":["extend","name","props","cancelText","default","large","Boolean","eager","persistent","saveText","transition","type","String","isActive","watch","val","this","$emit","setTimeout","focus","methods","input","$refs","content","querySelector","fn","text","$createElement","color","light","on","click","class","genButton","cancel","save","returnValue","staticClass","keydown","e","keyCode","esc","enter","value","ref","$slots","h","themeClasses","contentClass","origin","right","closeOnClick","closeOnContentClick","dark","scopedSlots","activator","genContent","genActions","render","_vm","_h","_c","_self","_v","attrs","headers","elements","tableHeight","_u","key","items","_l","item","id","_s","identifier","currentUser","hasRole","$event","openEditDialog","updateRelease","model","callback","$$v","release","expression","proxy","_f","staticRenderFns","width","window","innerHeight","$vuetify","application","top","selected","$apollo","mutate","mutation","variables","console","error","graphQLErrors","updateTableHeight","addEventListener","apollo","component","VCol","VDataTable","VEditDialog","VRow","VTextField"],"mappings":"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","file":"js/chunk-658b51f1.907b59c1.js","sourcesContent":["// Styles\nimport \"../../../src/components/VDataTable/VEditDialog.sass\"; // Mixins\n\nimport Returnable from '../../mixins/returnable';\nimport Themeable from '../../mixins/themeable'; // Utils\n\nimport { keyCodes } from '../../util/helpers'; // Component\n\nimport VBtn from '../VBtn';\nimport VMenu from '../VMenu';\nimport mixins from '../../util/mixins';\n/* @vue/component */\n\nexport default mixins(Returnable, Themeable).extend({\n  name: 'v-edit-dialog',\n  props: {\n    cancelText: {\n      default: 'Cancel'\n    },\n    large: Boolean,\n    eager: Boolean,\n    persistent: Boolean,\n    saveText: {\n      default: 'Save'\n    },\n    transition: {\n      type: String,\n      default: 'slide-x-reverse-transition'\n    }\n  },\n\n  data() {\n    return {\n      isActive: false\n    };\n  },\n\n  watch: {\n    isActive(val) {\n      if (val) {\n        this.$emit('open');\n        setTimeout(this.focus, 50); // Give DOM time to paint\n      } else {\n        this.$emit('close');\n      }\n    }\n\n  },\n  methods: {\n    cancel() {\n      this.isActive = false;\n      this.$emit('cancel');\n    },\n\n    focus() {\n      const input = this.$refs.content.querySelector('input');\n      input && input.focus();\n    },\n\n    genButton(fn, text) {\n      return this.$createElement(VBtn, {\n        props: {\n          text: true,\n          color: 'primary',\n          light: true\n        },\n        on: {\n          click: fn\n        }\n      }, text);\n    },\n\n    genActions() {\n      return this.$createElement('div', {\n        class: 'v-small-dialog__actions'\n      }, [this.genButton(this.cancel, this.cancelText), this.genButton(() => {\n        this.save(this.returnValue);\n        this.$emit('save');\n      }, this.saveText)]);\n    },\n\n    genContent() {\n      return this.$createElement('div', {\n        staticClass: 'v-small-dialog__content',\n        on: {\n          keydown: e => {\n            const input = this.$refs.content.querySelector('input');\n            e.keyCode === keyCodes.esc && this.cancel();\n\n            if (e.keyCode === keyCodes.enter && input) {\n              this.save(input.value);\n              this.$emit('save');\n            }\n          }\n        },\n        ref: 'content'\n      }, [this.$slots.input]);\n    }\n\n  },\n\n  render(h) {\n    return h(VMenu, {\n      staticClass: 'v-small-dialog',\n      class: this.themeClasses,\n      props: {\n        contentClass: 'v-small-dialog__menu-content',\n        transition: this.transition,\n        origin: 'top right',\n        right: true,\n        value: this.isActive,\n        closeOnClick: !this.persistent,\n        closeOnContentClick: false,\n        eager: this.eager,\n        light: this.light,\n        dark: this.dark\n      },\n      on: {\n        input: val => this.isActive = val\n      },\n      scopedSlots: {\n        activator: ({\n          on\n        }) => {\n          return h('div', {\n            staticClass: 'v-small-dialog__activator',\n            on\n          }, [h('span', {\n            staticClass: 'v-small-dialog__activator__content'\n          }, this.$slots.default)]);\n        }\n      }\n    }, [this.genContent(), this.large ? this.genActions() : null]);\n  }\n\n});\n//# sourceMappingURL=VEditDialog.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',[_c('h1',{staticClass:\"display-1 mb-2\"},[_vm._v(\"Game Versions\")]),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.elements,\"sort-by\":\"release\",\"sort-desc\":true,\"items-per-page\":25,\"height\":_vm.tableHeight,\"dense\":\"\"},scopedSlots:_vm._u([{key:\"body\",fn:function(ref){\nvar items = ref.items;\nreturn [_c('tbody',_vm._l((items),function(item){return _c('tr',{key:item.id},[_c('td',{staticClass:\"mono\"},[_vm._v(_vm._s(item.identifier))]),(_vm.currentUser.hasRole('ADMIN'))?[_c('td',[_c('v-edit-dialog',{attrs:{\"large\":\"\",\"persistent\":\"\"},on:{\"open\":function($event){return _vm.openEditDialog(item)},\"save\":_vm.updateRelease},scopedSlots:_vm._u([{key:\"input\",fn:function(){return [_c('v-text-field',{attrs:{\"label\":\"Edit Release\",\"single-line\":\"\"},model:{value:(_vm.release),callback:function ($$v) {_vm.release=$$v},expression:\"release\"}})]},proxy:true}],null,true)},[_vm._v(_vm._s(_vm._f(\"moment\")(item.release,'LLL')))])],1)]:[_c('td',[_vm._v(_vm._s(_vm._f(\"moment\")(item.release,'LLL')))])],_c('td',{staticClass:\"mono\"},[_vm._v(_vm._s(item.id))])],2)}),0)]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { CurrentUser, currentUser } from '@/shared/current-user';\nimport { GameVersion } from '@/shared/graphql.schema';\nimport gql from 'graphql-tag';\nimport Vue from 'vue';\nimport { Component } from 'vue-property-decorator';\nimport { DataTableHeader } from 'vuetify';\n\n@Component({\n  apollo: {\n    elements: gql`\n      query {\n        elements: gameVersions {\n          id\n          identifier\n          release\n        }\n      }\n    `\n  }\n})\nexport default class Index extends Vue {\n  public readonly currentUser: CurrentUser | null = currentUser();\n  public readonly headers: DataTableHeader[] = [\n    { text: 'Identifier', width: 190, value: 'identifier' },\n    { text: 'Release', width: 230, value: 'release' },\n    { text: 'ID', width: 340, value: 'id' }\n  ];\n\n  public selected!: GameVersion;\n  public release: string = '';\n\n  public tableHeight: number = 0;\n\n  public constructor() {\n    super();\n  }\n\n  public updateTableHeight(): void {\n    this.tableHeight = window.innerHeight - this.$vuetify.application.top - 204;\n  }\n\n  public openEditDialog(selected: GameVersion): void {\n    this.selected = selected;\n    this.release = selected.release ?? '';\n  }\n\n  public async updateRelease(): Promise<void> {\n    try {\n      await this.$apollo.mutate({\n        mutation: gql`\n          mutation UpdateGameVersion($id: ID!, $input: UpdateGameVersionInput!) {\n            updateGameVersion(id: $id, input: $input) {\n              id\n              identifier\n              release\n            }\n          }\n        `,\n        variables: {\n          id: this.selected.id,\n          input: {\n            release: this.release || null\n          }\n        }\n      });\n    } catch (error) {\n      console.error(error.graphQLErrors);\n      return;\n    }\n    this.selected.release = this.release;\n  }\n\n  protected mounted(): void {\n    this.updateTableHeight();\n    window.addEventListener('resize', () => this.updateTableHeight());\n  }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!./index.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!./index.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.pug?vue&type=template&id=0e7f5251&lang=pug&\"\nimport script from \"./index.ts?vue&type=script&lang=ts&\"\nexport * from \"./index.ts?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VEditDialog } from 'vuetify/lib/components/VDataTable';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VCol,VDataTable,VEditDialog,VRow,VTextField})\n"],"sourceRoot":""}